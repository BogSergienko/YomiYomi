# YomiYomi

Мобильное приложение на Flutter для чтения японских текстов с фуриганой, переводами и морфологическим анализом.

## Обзор

YomiYomi — мобильное приложение для чтения японских текстов с фуриганой, переводами и морфологическим анализом. Разработано на Flutter и Dart, работает полностью оффлайн и адаптируется под уровень пользователя. Поддерживает локализацию интерфейса и гибкую настройку токенизации текста.

⚠️ Протестировано на **Android**. Поддержка iOS в планах.

## Возможности

- **Фуригана**: Автоматическая подстановка фуриганы над кандзи через движок на WebView.
- **Фильтрация по уровням JLPT**: Включение/выключение фуриганы по уровням JLPT (N1–N5 или все) через выпадающее меню с циклом сброса.
- **Подсветка по уровням JLPT**: Слова и кандзи подсвечиваются по уровням JLPT (N1: фиолетовый, N2: красный, N3: оранжевый, N4: жёлтый, N5: зелёный) с использованием дистрибутива Yomitan JLPT Vocab.
- **Словарь**: Подключён JMdict (версия 3.6.1, английский и русский) с переключением языка перевода в настройках.
- **Токенизация текста**: Sudachi (v0.7.5) с тремя режимами токенизации:
  - **Mode A**: Мелкие токены для детального анализа (напр., "食べ物" → "食べ" + "物").
  - **Mode B**: Средние токены для сбалансированного анализа (напр., "食べ物" как одно слово).
  - **Mode C**: Крупные токены для составных слов (напр., "食べ物" + "を" + "食べます").
- **Локализация интерфейса**: Поддержка русского, английского и японского языков с переключением в реальном времени через SettingsSheet.
- **Настройки**: Dropdown-меню для выбора режима токенизации и языка, с сохранением в SharedPreferences.
- **Примечание**: Тёмная тема в разработке, будет добавлена в ближайшем обновлении.

## Примечания по производительности

- Первый запуск: Конвертация словарей в SQLite занимает 2–5 секунд. Последующие запуски и операции — моментально.
- Токенизация: <1 сек на 2000 символов.
- Белый экран на старте будет заменён индикатором загрузки в будущем.

## В разработке

- **Фильтр JLPT через jlpt-classifier**:
  - Интеграция Python-скрипта для классификации слов по уровням JLPT.
  - Обновление SQLite-базы с новыми уровнями JLPT.
  - Обновление логики фильтрации в `toggleFuriganaByJLPT`.
- **Тёмная тема**:
  - Переключатель тёмной темы в меню настроек.
  - Реализация через ThemeData и CSS в `index.html`.
  - Поддержка автоматического режима (по системной теме).
  - Предупреждение о необходимости перезапуска приложения.
- **Библиотека текстов**: Возможность сохранять, тегировать и повторно читать тексты.

## В планах

- Контекстный перевод: Перевод длинных фраз по нажатию или выделению.
- Отображение тонового акцента.
- Импорт текста из PDF, ePub и через камеру (OCR).
- Аудиоозвучка текста с переводом и подсветкой.
- Поиск слов по всей библиотеке.
- Настройка скорости озвучки и голоса.
- Отметка "Выучил слово" — скрытие фуриганы.
- Поддержка Markdown-формата.
- Гибридный OCR: офлайн (Tesseract) и онлайн (Google API).
- Кэширование переводов для оффлайн-доступа.

## Как начать

1. Склонируйте репозиторий: `git clone https://github.com/BogSergienko/YomiYomi.git`
2. Установите зависимости: `flutter pub get`
3. Запустите приложение: `flutter run`

> Примечание: Крупные файлы (`*.jar`, `*.dic`, `*.json`) отслеживаются через Git LFS.

## Лицензия

MIT License. См. LICENSE для подробностей.

## Скачивание

Скачайте последнюю APK для Android из [Releases](https://github.com/BogSergienko/YomiYomi/releases).